{
  "name": "Elevator",
  "var_input": [
    {
      "name": "CurrentFloor",
      "type": "int",
      "description": "Current floor position of the elevator"
    },
    {
      "name": "TargetFloor",
      "type": "int",
      "description": "Destination floor requested"
    },
    {
      "name": "WeightLoad",
      "type": "float",
      "description": "Current weight load in kg"
    }
  ],
  "var_output": [
    {
      "name": "DoorStatus",
      "type": "bool",
      "description": "Door open/closed status (TRUE=open)"
    },
    {
      "name": "Direction",
      "type": "int",
      "description": "Movement direction (0=stopped, 1=up, -1=down)"
    },
    {
      "name": "OverloadAlarm",
      "type": "bool",
      "description": "Overload warning signal"
    }
  ],
  "signal_input": [
    {
      "name": "CallButton",
      "description": "Floor call button pressed"
    },
    {
      "name": "DoorButton",
      "description": "Door open/close button pressed"
    },
    {
      "name": "EmergencyStop",
      "description": "Emergency stop signal"
    }
  ],
  "signal_output": [
    {
      "name": "ArrivalSignal",
      "description": "Signal when arriving at target floor"
    },
    {
      "name": "OverloadSignal",
      "description": "Overload warning signal"
    }
  ],
  "InternalVars": [
    {
      "name": "IsMoving",
      "type": "bool",
      "InitalVaule": "FALSE",
      "description": "Elevator movement status"
    },
    {
      "name": "DoorTimer",
      "type": "int",
      "InitalVaule": "0",
      "description": "Timer for door open duration"
    }
  ],
  "ECC": {
    "ECStates": [
      {
        "name": "Idle",
        "comment": "Waiting state",
        "x": 50,
        "y": 50
      },
      {
        "name": "MovingUp",
        "comment": "Moving upwards",
        "x": 200,
        "y": 50,
        "ecAction": {
          "algorithm": "MoveElevator",
          "output": "Direction"
        }
      },
      {
        "name": "MovingDown",
        "comment": "Moving downwards",
        "x": 200,
        "y": 150,
        "ecAction": {
          "algorithm": "MoveElevator",
          "output": "Direction"
        }
      },
      {
        "name": "DoorOpen",
        "comment": "Door open state",
        "x": 350,
        "y": 50,
        "ecAction": {
          "algorithm": "DoorControl",
          "output": "DoorStatus"
        }
      },
      {
        "name": "Emergency",
        "comment": "Emergency stop state",
        "x": 350,
        "y": 150,
        "ecAction": {
          "algorithm": "EmergencyStop",
          "output": "OverloadSignal"
        }
      }
    ],
    "ECTransitions": [
      {
        "source": "Idle",
        "destination": "MovingUp",
        "condition": "TargetFloor > CurrentFloor",
        "comment": "Request to go up",
        "x": 125,
        "y": 30
      },
      {
        "source": "Idle",
        "destination": "MovingDown",
        "condition": "TargetFloor < CurrentFloor",
        "comment": "Request to go down",
        "x": 125,
        "y": 100
      },
      {
        "source": "MovingUp",
        "destination": "DoorOpen",
        "condition": "CurrentFloor == TargetFloor",
        "comment": "Arrived at target floor",
        "x": 275,
        "y": 50
      },
      {
        "source": "MovingDown",
        "destination": "DoorOpen",
        "condition": "CurrentFloor == TargetFloor",
        "comment": "Arrived at target floor",
        "x": 275,
        "y": 100
      },
      {
        "source": "DoorOpen",
        "destination": "Idle",
        "condition": "DoorTimer >= 10",
        "comment": "Door timeout",
        "x": 200,
        "y": 30
      },
      {
        "source": "Any",
        "destination": "Emergency",
        "condition": "EmergencyStop OR WeightLoad > 1000",
        "comment": "Emergency stop triggered",
        "x": 250,
        "y": 200
      }
    ]
  },
  "Algorithms": [
    {
      "Name": "MoveElevator",
      "Comment": "Control elevator movement",
      "Input": "CurrentFloor, TargetFloor",
      "Output": "Direction",
      "Code": "IF TargetFloor > CurrentFloor THEN\n    Direction := 1;\nELSIF TargetFloor < CurrentFloor THEN\n    Direction := -1;\nELSE\n    Direction := 0;\nEND_IF;"
    },
    {
      "Name": "DoorControl",
      "Comment": "Control door operation",
      "Input": "DoorButton, DoorTimer",
      "Output": "DoorStatus",
      "Code": "IF DoorButton OR DoorTimer < 10 THEN\n    DoorStatus := TRUE;\n    DoorTimer := DoorTimer + 1;\nELSE\n    DoorStatus := FALSE;\n    DoorTimer := 0;\nEND_IF;"
    },
    {
      "Name": "EmergencyStop",
      "Comment": "Handle emergency situations",
      "Input": "EmergencyStop, WeightLoad",
      "Output": "OverloadSignal",
      "Code": "IF EmergencyStop OR WeightLoad > 1000 THEN\n    OverloadSignal := TRUE;\n    Direction := 0;\n    DoorStatus := FALSE;\nELSE\n    OverloadSignal := FALSE;\nEND_IF;"
    }
  ]
}